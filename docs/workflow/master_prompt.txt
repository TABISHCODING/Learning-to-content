ğŸ›  Master Developer Prompt (for n8n Workflow + Project Integration)

I am building an AI-powered educational shorts generator with the following components:

UI: Streamlit app (code provided)

Database: Excel/Google Sheet schema (file provided)

Prompts: All the AI prompts for topic extraction, script generation, image prompts, voice styles, etc. (included below)

Workflow Engine: n8n

ğŸ“‚ What I Am Sharing With You

UI Code â†’ so you understand how the user interacts with the system (input, preview, status updates).

Recently updated: added Voice Gender selection (Male / Female) in the UI payload.

DB Schema (Excel/Sheets) â†’ to show where every piece of data is stored and how it should be updated.

Prompts â†’

Topic Extraction Prompt (Gemini)

Script+Image+Voice Prompt (Gemini)

Image Generation (Cloudflare fallback)

TTS Generation (Google Cloud TTS)

Video Assembly (FFmpeg)

ğŸ‘‰ I am sharing these so you can analyze the current state, then design the missing workflow logic in n8n.

ğŸ§© Your Task

Read my UI code + DB schema + prompts carefully.

Identify missing pieces â†’ especially around status tracking and how outputs map between steps.

Design and implement the n8n workflow so it connects:

Raw Notes â†’ Topic Extraction (Gemini)

Topic â†’ Script + Image Prompts (Gemini)

Script â†’ TTS (Audio, based on Language + Gender selection)

Image Prompts â†’ Cloudflare API (fallback: Together/HuggingFace)

Audio + Images â†’ FFmpeg â†’ Final Video

Implement Voice Gender Logic in TTS â†’ based on language + voice_gender from UI:

Example Mapping (Google Cloud TTS):

English + Male â†’ en-US-Wavenet-D

English + Female â†’ en-US-Wavenet-F

Hindi/Hinglish + Male â†’ hi-IN-Wavenet-B

Hindi/Hinglish + Female â†’ hi-IN-Wavenet-E

ğŸ‘‰ Use an IF or Switch node in n8n to set a variable (tts_voice_name) before calling TTS.

Update the DB at every step with correct status + file paths.

Update the UI status tracker in real-time, using the following flow:

ğŸ”„ Status Flow (must implement)

Pending â†’ Topic just extracted.

ScriptGenerated â†’ Gemini created script + image prompts.

AudioGenerated â†’ TTS finished.

ImagesGenerated â†’ All 4 images ready.

VideoGenerated â†’ Final MP4 created.

Completed â†’ Everything done and saved.

ğŸ‘‰ This status must update in both the Database and the UI so I can debug/preview easily.

âš™ï¸ Workflow Rules

One topic at a time â†’ full cycle completes before next.

Image generation waits until all 4 are successfully created.

Fallback APIs for images â†’ Cloudflare â†’ Together â†’ HuggingFace.

DB Mapping Required:

Script text

Voice gender + voice style + final TTS voice name

Audio path

Image paths (4 images)

Video path

Traceability â†’ every stage can be previewed in the UI with live status.

âœ… Deliverables

A working n8n workflow JSON (export)

Notes on how you mapped DB columns â†’ workflow steps

Updates to my UI code (if needed) to support status tracking

ğŸ”‘ Why I Shared All Code + Prompts

UI code â†’ so you see how statuses, previews, and gender selection are handled.

DB schema â†’ so you know exactly what fields to update.

Prompts â†’ so you donâ€™t redesign; just integrate them properly.

ğŸ‘‰ Your job is to fill the missing links (status flow + step orchestration + TTS voice logic) and deliver a ready-to-run workflow.

ğŸ”‘ Key Rules

One topic at a time â†’ wait for images + audio before next.

Fallback safety â†’ Cloudflare â†’ Together â†’ HuggingFace for images.

Voice gender control â†’ UI sends voice_gender, workflow maps it to correct Google TTS voice.

UI Debugging â†’ Live status at each stage (Starter, Working, Waiting, Completed).

DB Sync â†’ File paths + statuses always stored.

Images sequential â†’ All 4 must succeed â†’ then mark ImagesGenerated.

Retries with fallback â†’ ensures no broken flow.